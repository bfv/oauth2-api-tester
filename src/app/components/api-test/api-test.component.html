    <div class="api-test-container">
      <h2>API Test</h2>
      
      <div *ngIf="!authService.isAuthenticated()" class="no-auth">
        <p>Please authenticate first to test API endpoints.</p>
      </div>
      
      <div *ngIf="authService.isAuthenticated()" class="api-test-form">
        
        <!-- Request Configuration -->
        <div class="request-section">
          <h3>Request Configuration</h3>
          
          <div class="form-row">
            <div class="form-group">
              <label for="method">HTTP Method:</label>
              <select id="method" [(ngModel)]="request.method" name="method">
                <option value="GET">GET</option>
                <option value="POST">POST</option>
                <option value="PUT">PUT</option>
                <option value="DELETE">DELETE</option>
              </select>
            </div>
            
            <div class="form-group url-group">
              <label for="url">URL:</label>
              <div class="url-input-group">
                <input 
                  type="text" 
                  id="baseUrl" 
                  [(ngModel)]="baseUrl" 
                  name="baseUrl"
                  placeholder="Base URL"
                  class="base-url-input">
                <select 
                  [(ngModel)]="selectedEndpoint" 
                  name="selectedEndpoint"
                  (ngModelChange)="onEndpointChange()"
                  class="endpoint-select">
                  <option value="">Select Endpoint</option>
                  <option *ngFor="let endpoint of availableEndpoints" [value]="endpoint.path">
                    {{ endpoint.name }}
                  </option>
                </select>
                <input 
                  type="text" 
                  id="customPath" 
                  [(ngModel)]="customPath" 
                  name="customPath"
                  (ngModelChange)="updateFullUrl()"
                  placeholder="Or enter custom path"
                  class="custom-path-input">
              </div>
              <div class="full-url">
                <strong>Full URL:</strong> {{ request.url }}
              </div>
            </div>
          </div>
          
          <!-- Request Body (for POST/PUT) -->
          <div *ngIf="request.method === 'POST' || request.method === 'PUT'" class="form-group">
            <label for="body">Request Body (JSON):</label>
            <textarea 
              id="body" 
              [(ngModel)]="requestBodyText" 
              name="body"
              rows="6"
              placeholder='{"example": "data"}'
              class="json-textarea"></textarea>
          </div>
          
          <!-- Custom Headers -->
          <div class="form-group">
            <label>Custom Headers:</label>
            <div class="headers-section">
              <div class="header-item" *ngFor="let header of customHeaders; trackBy: trackByIndex">
                <input 
                  type="text" 
                  [(ngModel)]="header.key" 
                  name="header-key-{{header.id}}"
                  placeholder="Header Name"
                  class="header-key">
                <input 
                  type="text" 
                  [(ngModel)]="header.value" 
                  name="header-value-{{header.id}}"
                  placeholder="Header Value"
                  class="header-value">
                <button type="button" (click)="removeHeader(header.id)" class="btn btn-danger btn-sm">Remove</button>
              </div>
              <button type="button" (click)="addHeader()" class="btn btn-secondary btn-sm">Add Header</button>
            </div>
          </div>
          
          <!-- Send Request -->
          <div class="form-actions">
            <button (click)="sendRequest()" [disabled]="loading" class="btn btn-primary">
              {{ loading ? 'Sending...' : 'Send Request' }}
            </button>
            <button (click)="clearResponse()" class="btn btn-secondary">Clear Response</button>
          </div>
        </div>
        
        <!-- Response Section -->
        <div *ngIf="response() || error()" class="response-section">
          <h3>Response</h3>
          
          <div *ngIf="error()" class="error-response">
            <h4>Error:</h4>
            <pre>{{ error() }}</pre>
          </div>
          
          <div *ngIf="response()" class="success-response">
            <div class="response-meta">
              <div class="meta-item">
                <strong>Status:</strong> 
                <span [class]="getStatusClass(response()!.status)">
                  {{ response()!.status }} {{ response()!.statusText }}
                </span>
              </div>
              <div class="meta-item">
                <strong>Duration:</strong> {{ requestDuration }}ms
              </div>
            </div>
            
            <div class="response-headers" *ngIf="response()!.headers && hasHeaders(response()!.headers)">
              <h4>Response Headers:</h4>
              <pre>{{ formatJson(response()!.headers) }}</pre>
            </div>
            
            <div class="response-body">
              <h4>Response Body:</h4>
              <div class="response-controls">
                <button (click)="togglePrettyJson()" class="btn btn-sm btn-secondary">
                  {{ prettyJson ? 'Raw' : 'Pretty' }} JSON
                </button>
                <button (click)="copyResponse()" class="btn btn-sm btn-primary">Copy Response</button>
              </div>
              
              <pre [class]="'response-content ' + (prettyJson ? 'pretty' : 'raw')">{{ getFormattedResponse() }}</pre>
            </div>
          </div>
        </div>
      </div>
      
      <div *ngIf="copyMessage" class="copy-message">
        {{ copyMessage }}
      </div>
    </div>
